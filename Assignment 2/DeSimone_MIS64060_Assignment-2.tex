% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  pdftitle={DeSimone\_Assignment 2},
  pdfauthor={Heather DeSimone},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifluatex
  \usepackage{selnolig}  % disable illegal ligatures
\fi

\title{DeSimone\_Assignment 2}
\author{Heather DeSimone}
\date{2/19/2022}

\begin{document}
\maketitle

\#\#First I have loaded in my data frame and called a summary of the
information.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DF}\OtherTok{=}\FunctionTok{read.csv}\NormalTok{(}\StringTok{"C:/Users/hdesi/Desktop/MBA/Machine Learning/UniversalBank.csv"}\NormalTok{)}
\FunctionTok{library}\NormalTok{(dplyr)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Attaching package: 'dplyr'
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:stats':
## 
##     filter, lag
\end{verbatim}

\begin{verbatim}
## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DF }\OtherTok{\textless{}{-}}\NormalTok{ DF }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{relocate}\NormalTok{(Personal.Loan, }\AttributeTok{.after =}\NormalTok{ CreditCard)}
\FunctionTok{summary}\NormalTok{(DF)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##        ID            Age          Experience       Income          ZIP.Code    
##  Min.   :   1   Min.   :23.00   Min.   :-3.0   Min.   :  8.00   Min.   : 9307  
##  1st Qu.:1251   1st Qu.:35.00   1st Qu.:10.0   1st Qu.: 39.00   1st Qu.:91911  
##  Median :2500   Median :45.00   Median :20.0   Median : 64.00   Median :93437  
##  Mean   :2500   Mean   :45.34   Mean   :20.1   Mean   : 73.77   Mean   :93153  
##  3rd Qu.:3750   3rd Qu.:55.00   3rd Qu.:30.0   3rd Qu.: 98.00   3rd Qu.:94608  
##  Max.   :5000   Max.   :67.00   Max.   :43.0   Max.   :224.00   Max.   :96651  
##      Family          CCAvg          Education        Mortgage    
##  Min.   :1.000   Min.   : 0.000   Min.   :1.000   Min.   :  0.0  
##  1st Qu.:1.000   1st Qu.: 0.700   1st Qu.:1.000   1st Qu.:  0.0  
##  Median :2.000   Median : 1.500   Median :2.000   Median :  0.0  
##  Mean   :2.396   Mean   : 1.938   Mean   :1.881   Mean   : 56.5  
##  3rd Qu.:3.000   3rd Qu.: 2.500   3rd Qu.:3.000   3rd Qu.:101.0  
##  Max.   :4.000   Max.   :10.000   Max.   :3.000   Max.   :635.0  
##  Securities.Account   CD.Account         Online         CreditCard   
##  Min.   :0.0000     Min.   :0.0000   Min.   :0.0000   Min.   :0.000  
##  1st Qu.:0.0000     1st Qu.:0.0000   1st Qu.:0.0000   1st Qu.:0.000  
##  Median :0.0000     Median :0.0000   Median :1.0000   Median :0.000  
##  Mean   :0.1044     Mean   :0.0604   Mean   :0.5968   Mean   :0.294  
##  3rd Qu.:0.0000     3rd Qu.:0.0000   3rd Qu.:1.0000   3rd Qu.:1.000  
##  Max.   :1.0000     Max.   :1.0000   Max.   :1.0000   Max.   :1.000  
##  Personal.Loan  
##  Min.   :0.000  
##  1st Qu.:0.000  
##  Median :0.000  
##  Mean   :0.096  
##  3rd Qu.:0.000  
##  Max.   :1.000
\end{verbatim}

\#\#Next I will remove the 2 variables that will not be used in my
classification/prediction: ID and Zip Code. \#\#I have also converted a
few attributes over to factors - these attributes classify a yes (1) or
no (0) response.I have called a summary to check my work.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{ID}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{ZIP.Code}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{=}\FunctionTok{as.factor}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{Personal.Loan)}
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{=}\FunctionTok{as.factor}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{Securities.Account)}
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{=}\FunctionTok{as.factor}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{CD.Account)}
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{=}\FunctionTok{as.factor}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{Online)}
\NormalTok{DF}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{=}\FunctionTok{as.factor}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{CreditCard)}
\FunctionTok{summary}\NormalTok{(DF)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       Age          Experience       Income           Family     
##  Min.   :23.00   Min.   :-3.0   Min.   :  8.00   Min.   :1.000  
##  1st Qu.:35.00   1st Qu.:10.0   1st Qu.: 39.00   1st Qu.:1.000  
##  Median :45.00   Median :20.0   Median : 64.00   Median :2.000  
##  Mean   :45.34   Mean   :20.1   Mean   : 73.77   Mean   :2.396  
##  3rd Qu.:55.00   3rd Qu.:30.0   3rd Qu.: 98.00   3rd Qu.:3.000  
##  Max.   :67.00   Max.   :43.0   Max.   :224.00   Max.   :4.000  
##      CCAvg          Education        Mortgage     Securities.Account CD.Account
##  Min.   : 0.000   Min.   :1.000   Min.   :  0.0   0:4478             0:4698    
##  1st Qu.: 0.700   1st Qu.:1.000   1st Qu.:  0.0   1: 522             1: 302    
##  Median : 1.500   Median :2.000   Median :  0.0                                
##  Mean   : 1.938   Mean   :1.881   Mean   : 56.5                                
##  3rd Qu.: 2.500   3rd Qu.:3.000   3rd Qu.:101.0                                
##  Max.   :10.000   Max.   :3.000   Max.   :635.0                                
##  Online   CreditCard Personal.Loan
##  0:2016   0:3530     0:4520       
##  1:2984   1:1470     1: 480       
##                                   
##                                   
##                                   
## 
\end{verbatim}

\#\#I will now load the caret and class libraries.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(caret)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: package 'caret' was built under R version 4.1.2
\end{verbatim}

\begin{verbatim}
## Loading required package: ggplot2
\end{verbatim}

\begin{verbatim}
## Warning: package 'ggplot2' was built under R version 4.1.2
\end{verbatim}

\begin{verbatim}
## Loading required package: lattice
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(class)}
\end{Highlighting}
\end{Shaded}

\#\#Next I have created a new data set for the normalization process - I
have removed the target variable: Personal Loan as we cannot normalize
it. \#\#I have also removed the attributes that were factored

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Normalization\_DF }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(DF)}
\NormalTok{Normalization\_DF}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{Normalization\_DF}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{Normalization\_DF}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{Normalization\_DF}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{Normalization\_DF}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\FunctionTok{summary}\NormalTok{(Normalization\_DF)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       Age          Experience       Income           Family     
##  Min.   :23.00   Min.   :-3.0   Min.   :  8.00   Min.   :1.000  
##  1st Qu.:35.00   1st Qu.:10.0   1st Qu.: 39.00   1st Qu.:1.000  
##  Median :45.00   Median :20.0   Median : 64.00   Median :2.000  
##  Mean   :45.34   Mean   :20.1   Mean   : 73.77   Mean   :2.396  
##  3rd Qu.:55.00   3rd Qu.:30.0   3rd Qu.: 98.00   3rd Qu.:3.000  
##  Max.   :67.00   Max.   :43.0   Max.   :224.00   Max.   :4.000  
##      CCAvg          Education        Mortgage    
##  Min.   : 0.000   Min.   :1.000   Min.   :  0.0  
##  1st Qu.: 0.700   1st Qu.:1.000   1st Qu.:  0.0  
##  Median : 1.500   Median :2.000   Median :  0.0  
##  Mean   : 1.938   Mean   :1.881   Mean   : 56.5  
##  3rd Qu.: 2.500   3rd Qu.:3.000   3rd Qu.:101.0  
##  Max.   :10.000   Max.   :3.000   Max.   :635.0
\end{verbatim}

\#\#I will now normalize the data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Norm\_model }\OtherTok{\textless{}{-}} \FunctionTok{preProcess}\NormalTok{(Normalization\_DF, }
                         \AttributeTok{method =} \FunctionTok{c}\NormalTok{(}\StringTok{"center"}\NormalTok{, }\StringTok{"scale"}\NormalTok{))}
\NormalTok{loan\_norm}\OtherTok{=}\FunctionTok{predict}\NormalTok{(Norm\_model,Normalization\_DF)}
\FunctionTok{summary}\NormalTok{(loan\_norm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       Age             Experience            Income            Family       
##  Min.   :-1.94871   Min.   :-2.014710   Min.   :-1.4288   Min.   :-1.2167  
##  1st Qu.:-0.90188   1st Qu.:-0.881116   1st Qu.:-0.7554   1st Qu.:-1.2167  
##  Median :-0.02952   Median :-0.009121   Median :-0.2123   Median :-0.3454  
##  Mean   : 0.00000   Mean   : 0.000000   Mean   : 0.0000   Mean   : 0.0000  
##  3rd Qu.: 0.84284   3rd Qu.: 0.862874   3rd Qu.: 0.5263   3rd Qu.: 0.5259  
##  Max.   : 1.88967   Max.   : 1.996468   Max.   : 3.2634   Max.   : 1.3973  
##      CCAvg           Education          Mortgage      
##  Min.   :-1.1089   Min.   :-1.0490   Min.   :-0.5555  
##  1st Qu.:-0.7083   1st Qu.:-1.0490   1st Qu.:-0.5555  
##  Median :-0.2506   Median : 0.1417   Median :-0.5555  
##  Mean   : 0.0000   Mean   : 0.0000   Mean   : 0.0000  
##  3rd Qu.: 0.3216   3rd Qu.: 1.3324   3rd Qu.: 0.4375  
##  Max.   : 4.6131   Max.   : 1.3324   Max.   : 5.6875
\end{verbatim}

\#\#I will now add the attributes back in that I removed for
normalization.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{loan\_norm}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{=}\NormalTok{DF}\SpecialCharTok{$}\NormalTok{Personal.Loan}
\NormalTok{loan\_norm}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{=}\NormalTok{DF}\SpecialCharTok{$}\NormalTok{Securities.Account}
\NormalTok{loan\_norm}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{=}\NormalTok{DF}\SpecialCharTok{$}\NormalTok{CD.Account}
\NormalTok{loan\_norm}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{=}\NormalTok{DF}\SpecialCharTok{$}\NormalTok{Online}
\NormalTok{loan\_norm}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{=}\NormalTok{DF}\SpecialCharTok{$}\NormalTok{CreditCard}
\FunctionTok{summary}\NormalTok{(loan\_norm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##       Age             Experience            Income            Family       
##  Min.   :-1.94871   Min.   :-2.014710   Min.   :-1.4288   Min.   :-1.2167  
##  1st Qu.:-0.90188   1st Qu.:-0.881116   1st Qu.:-0.7554   1st Qu.:-1.2167  
##  Median :-0.02952   Median :-0.009121   Median :-0.2123   Median :-0.3454  
##  Mean   : 0.00000   Mean   : 0.000000   Mean   : 0.0000   Mean   : 0.0000  
##  3rd Qu.: 0.84284   3rd Qu.: 0.862874   3rd Qu.: 0.5263   3rd Qu.: 0.5259  
##  Max.   : 1.88967   Max.   : 1.996468   Max.   : 3.2634   Max.   : 1.3973  
##      CCAvg           Education          Mortgage       Personal.Loan
##  Min.   :-1.1089   Min.   :-1.0490   Min.   :-0.5555   0:4520       
##  1st Qu.:-0.7083   1st Qu.:-1.0490   1st Qu.:-0.5555   1: 480       
##  Median :-0.2506   Median : 0.1417   Median :-0.5555                
##  Mean   : 0.0000   Mean   : 0.0000   Mean   : 0.0000                
##  3rd Qu.: 0.3216   3rd Qu.: 1.3324   3rd Qu.: 0.4375                
##  Max.   : 4.6131   Max.   : 1.3324   Max.   : 5.6875                
##  Securities.Account CD.Account Online   CreditCard
##  0:4478             0:4698     0:2016   0:3530    
##  1: 522             1: 302     1:2984   1:1470    
##                                                   
##                                                   
##                                                   
## 
\end{verbatim}

\#\#I will now separate my data into training and validating sets -
training = 60\% and validation = 40\%.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Train\_Index }\OtherTok{=} \FunctionTok{createDataPartition}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{Personal.Loan,}\AttributeTok{p=}\FloatTok{0.6}\NormalTok{, }\AttributeTok{list=}\ConstantTok{FALSE}\NormalTok{)}
\NormalTok{Train.df}\OtherTok{=}\NormalTok{loan\_norm[Train\_Index,]}
\NormalTok{Validation.df}\OtherTok{=}\NormalTok{loan\_norm[}\SpecialCharTok{{-}}\NormalTok{Train\_Index,] }
\end{Highlighting}
\end{Shaded}

\#\#Question \#1 \#\#I will now input the attributes of the 1st customer
for prediction.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict}\OtherTok{=}\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{Age=}\DecValTok{40}\NormalTok{, }\AttributeTok{Experience=}\DecValTok{10}\NormalTok{,}
                      \AttributeTok{Income=}\DecValTok{84}\NormalTok{,}\AttributeTok{Family=}\DecValTok{2}\NormalTok{,}
                      \AttributeTok{CCAvg=}\DecValTok{2}\NormalTok{,}\AttributeTok{Education=}\DecValTok{2}\NormalTok{,}
                      \AttributeTok{Mortgage=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{Securities.Account=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{CD.Account=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{Online=}\DecValTok{1}\NormalTok{,}
                      \AttributeTok{CreditCard=}\DecValTok{1}\NormalTok{)}

\FunctionTok{print}\NormalTok{(To\_Predict)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Age Experience Income Family CCAvg Education Mortgage Securities.Account
## 1  40         10     84      2     2         2        0                  0
##   CD.Account Online CreditCard
## 1          0      1          1
\end{verbatim}

\#\#I will remove the attributes that were factored.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm}\OtherTok{=}\NormalTok{To\_Predict}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\end{Highlighting}
\end{Shaded}

\#\#I will now normalize the data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm}\OtherTok{=}\FunctionTok{predict}\NormalTok{(Norm\_model,To\_Predict\_norm)}
\end{Highlighting}
\end{Shaded}

\#\#I will now add the attributes back in that I removed for
normalization.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict}\SpecialCharTok{$}\NormalTok{Personal.Loan}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict}\SpecialCharTok{$}\NormalTok{Securities.Account}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict}\SpecialCharTok{$}\NormalTok{CD.Account}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict}\SpecialCharTok{$}\NormalTok{Online}
\NormalTok{To\_Predict\_norm}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict}\SpecialCharTok{$}\NormalTok{CreditCard}
\FunctionTok{print}\NormalTok{(To\_Predict\_norm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##          Age Experience    Income     Family     CCAvg Education   Mortgage
## 1 -0.4657003 -0.8811162 0.2221371 -0.3453975 0.0355115 0.1416887 -0.5554684
##   Securities.Account CD.Account Online CreditCard
## 1                  0          0      1          1
\end{verbatim}

\#\#I will now use the knn function to make my prediction.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Train.df }\OtherTok{\textless{}{-}}\NormalTok{ Train.df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{relocate}\NormalTok{(Personal.Loan, }\AttributeTok{.after =}\NormalTok{ CreditCard)}
\NormalTok{Prediction }\OtherTok{\textless{}{-}}\FunctionTok{knn}\NormalTok{(}\AttributeTok{train=}\NormalTok{Train.df[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{11}\NormalTok{], }
                 \AttributeTok{test=}\NormalTok{To\_Predict\_norm[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{11}\NormalTok{],}
                 \AttributeTok{cl=}\NormalTok{Train.df}\SpecialCharTok{$}\NormalTok{Personal.Loan,}
                 \AttributeTok{k=}\DecValTok{1}\NormalTok{)}
\FunctionTok{print}\NormalTok{(Prediction)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0
## Levels: 0 1
\end{verbatim}

\#\#This customer is predicted NOT to accept the personal loan

\#\#Question \#2 \#\#I will now build the knn model that will give the
best value of k that balances between overfitting and underfitting.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{123}\NormalTok{)}

\NormalTok{fitControl }\OtherTok{\textless{}{-}} \FunctionTok{trainControl}\NormalTok{(}\AttributeTok{method =} \StringTok{"repeatedcv"}\NormalTok{,}
                           \AttributeTok{number =} \DecValTok{3}\NormalTok{,}
                           \AttributeTok{repeats =} \DecValTok{2}\NormalTok{)}

\NormalTok{searchGrid}\OtherTok{=}\FunctionTok{expand.grid}\NormalTok{(}\AttributeTok{k =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{)}

\NormalTok{Knn.model}\OtherTok{=}\FunctionTok{train}\NormalTok{(Personal.Loan}\SpecialCharTok{\textasciitilde{}}\NormalTok{., }
                \AttributeTok{data=}\NormalTok{Train.df,}
                \AttributeTok{method=}\StringTok{\textquotesingle{}knn\textquotesingle{}}\NormalTok{,}
                \AttributeTok{tuneGrid=}\NormalTok{searchGrid,}
                \AttributeTok{trControl =}\NormalTok{ fitControl,)}

\NormalTok{Knn.model}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## k-Nearest Neighbors 
## 
## 3000 samples
##   11 predictor
##    2 classes: '0', '1' 
## 
## No pre-processing
## Resampling: Cross-Validated (3 fold, repeated 2 times) 
## Summary of sample sizes: 2000, 2000, 2000, 2000, 2000, 2000, ... 
## Resampling results across tuning parameters:
## 
##   k   Accuracy   Kappa    
##    1  0.9638333  0.7682359
##    2  0.9598333  0.7372643
##    3  0.9630000  0.7472794
##    4  0.9605000  0.7275311
##    5  0.9603333  0.7206852
##    6  0.9588333  0.7087747
##    7  0.9570000  0.6908287
##    8  0.9545000  0.6705592
##    9  0.9545000  0.6680539
##   10  0.9540000  0.6625283
## 
## Accuracy was used to select the optimal model using the largest value.
## The final value used for the model was k = 1.
\end{verbatim}

\#\#The best k value to use is 3. \#\#Question \#3 \#\#First I will use
the predict function of the caret package.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{predictions}\OtherTok{\textless{}{-}}\FunctionTok{predict}\NormalTok{(Knn.model,Validation.df)}
\end{Highlighting}
\end{Shaded}

\#Now I will compute the confusion matrix using the caret package.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{confusionMatrix}\NormalTok{(predictions,Validation.df}\SpecialCharTok{$}\NormalTok{Personal.Loan)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0 1797   69
##          1   11  123
##                                           
##                Accuracy : 0.96            
##                  95% CI : (0.9505, 0.9682)
##     No Information Rate : 0.904           
##     P-Value [Acc > NIR] : < 2.2e-16       
##                                           
##                   Kappa : 0.7336          
##                                           
##  Mcnemar's Test P-Value : 1.856e-10       
##                                           
##             Sensitivity : 0.9939          
##             Specificity : 0.6406          
##          Pos Pred Value : 0.9630          
##          Neg Pred Value : 0.9179          
##              Prevalence : 0.9040          
##          Detection Rate : 0.8985          
##    Detection Prevalence : 0.9330          
##       Balanced Accuracy : 0.8173          
##                                           
##        'Positive' Class : 0               
## 
\end{verbatim}

\#\#Question \#4 \#\#I will now input the attributes of the 2nd customer
for prediction. *Note that this customer information is the same as the
1st customer.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict2}\OtherTok{=}\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{Age=}\DecValTok{40}\NormalTok{, }\AttributeTok{Experience=}\DecValTok{10}\NormalTok{,}
                      \AttributeTok{Income=}\DecValTok{84}\NormalTok{,}\AttributeTok{Family=}\DecValTok{2}\NormalTok{,}
                      \AttributeTok{CCAvg=}\DecValTok{2}\NormalTok{,}\AttributeTok{Education=}\DecValTok{2}\NormalTok{,}
                      \AttributeTok{Mortgage=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{Securities.Account=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{CD.Account=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{Online=}\DecValTok{1}\NormalTok{,}
                      \AttributeTok{CreditCard=}\DecValTok{1}\NormalTok{)}

\FunctionTok{print}\NormalTok{(To\_Predict2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Age Experience Income Family CCAvg Education Mortgage Securities.Account
## 1  40         10     84      2     2         2        0                  0
##   CD.Account Online CreditCard
## 1          0      1          1
\end{verbatim}

\#\#I will remove the attributes that were factored.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm2}\OtherTok{=}\NormalTok{To\_Predict2}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\end{Highlighting}
\end{Shaded}

\#\#I will now normalize the data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm2}\OtherTok{=}\FunctionTok{predict}\NormalTok{(Norm\_model,To\_Predict\_norm2)}
\end{Highlighting}
\end{Shaded}

\#\#I will now add the attributes back in that I removed for
normalization.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict2}\SpecialCharTok{$}\NormalTok{Personal.Loan}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict2}\SpecialCharTok{$}\NormalTok{Securities.Account}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict2}\SpecialCharTok{$}\NormalTok{CD.Account}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict2}\SpecialCharTok{$}\NormalTok{Online}
\NormalTok{To\_Predict\_norm2}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict2}\SpecialCharTok{$}\NormalTok{CreditCard}
\FunctionTok{print}\NormalTok{(To\_Predict\_norm2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##          Age Experience    Income     Family     CCAvg Education   Mortgage
## 1 -0.4657003 -0.8811162 0.2221371 -0.3453975 0.0355115 0.1416887 -0.5554684
##   Securities.Account CD.Account Online CreditCard
## 1                  0          0      1          1
\end{verbatim}

\#\#I will now use the knn function to make my prediction.I am using k=3
as it is the best k value.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Train.df }\OtherTok{\textless{}{-}}\NormalTok{ Train.df }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{relocate}\NormalTok{(Personal.Loan, }\AttributeTok{.after =}\NormalTok{ CreditCard)}
\NormalTok{Prediction }\OtherTok{\textless{}{-}}\FunctionTok{knn}\NormalTok{(}\AttributeTok{train=}\NormalTok{Train.df[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{11}\NormalTok{], }
                 \AttributeTok{test=}\NormalTok{To\_Predict\_norm2[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{11}\NormalTok{],}
                 \AttributeTok{cl=}\NormalTok{Train.df}\SpecialCharTok{$}\NormalTok{Personal.Loan,}
                 \AttributeTok{k=}\DecValTok{3}\NormalTok{)}
\FunctionTok{print}\NormalTok{(Prediction)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0
## Levels: 0 1
\end{verbatim}

\#\#This customer is predicted NOT to take out the personal loan
\#\#Question 5 \#\#I will now repartition my data into training (50\%),
Validation (30\%), and test (20\%).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Train\_Index2 }\OtherTok{=} \FunctionTok{createDataPartition}\NormalTok{(DF}\SpecialCharTok{$}\NormalTok{Personal.Loan,}\AttributeTok{p=}\FloatTok{0.5}\NormalTok{, }\AttributeTok{list=}\ConstantTok{FALSE}\NormalTok{)}
\NormalTok{Train.df2}\OtherTok{=}\NormalTok{loan\_norm[Train\_Index2,]}
\NormalTok{Validation.df2}\OtherTok{=}\NormalTok{loan\_norm[}\SpecialCharTok{{-}}\NormalTok{Train\_Index2,] }
\end{Highlighting}
\end{Shaded}

\#\#I will now input the attributes of the 1st customer for prediction.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict3}\OtherTok{=}\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{Age=}\DecValTok{40}\NormalTok{, }\AttributeTok{Experience=}\DecValTok{10}\NormalTok{,}
                      \AttributeTok{Income=}\DecValTok{84}\NormalTok{,}\AttributeTok{Family=}\DecValTok{2}\NormalTok{,}
                      \AttributeTok{CCAvg=}\DecValTok{2}\NormalTok{,}\AttributeTok{Education=}\DecValTok{2}\NormalTok{,}
                      \AttributeTok{Mortgage=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{Securities.Account=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{CD.Account=}\DecValTok{0}\NormalTok{,}
                      \AttributeTok{Online=}\DecValTok{1}\NormalTok{,}
                      \AttributeTok{CreditCard=}\DecValTok{1}\NormalTok{)}

\FunctionTok{print}\NormalTok{(To\_Predict3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   Age Experience Income Family CCAvg Education Mortgage Securities.Account
## 1  40         10     84      2     2         2        0                  0
##   CD.Account Online CreditCard
## 1          0      1          1
\end{verbatim}

\#\#I will remove the attributes that were factored.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm3}\OtherTok{=}\NormalTok{To\_Predict3}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\ConstantTok{NULL}
\end{Highlighting}
\end{Shaded}

\#\#I will now normalize the data.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm3}\OtherTok{=}\FunctionTok{predict}\NormalTok{(Norm\_model,To\_Predict\_norm3)}
\end{Highlighting}
\end{Shaded}

\#\#I will now add the attributes back in that I removed for
normalization.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{Personal.Loan}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict3}\SpecialCharTok{$}\NormalTok{Personal.Loan}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{Securities.Account}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict3}\SpecialCharTok{$}\NormalTok{Securities.Account}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{CD.Account}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict3}\SpecialCharTok{$}\NormalTok{CD.Account}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{Online}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict3}\SpecialCharTok{$}\NormalTok{Online}
\NormalTok{To\_Predict\_norm3}\SpecialCharTok{$}\NormalTok{CreditCard}\OtherTok{\textless{}{-}}\NormalTok{To\_Predict3}\SpecialCharTok{$}\NormalTok{CreditCard}
\FunctionTok{print}\NormalTok{(To\_Predict\_norm3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##          Age Experience    Income     Family     CCAvg Education   Mortgage
## 1 -0.4657003 -0.8811162 0.2221371 -0.3453975 0.0355115 0.1416887 -0.5554684
##   Securities.Account CD.Account Online CreditCard
## 1                  0          0      1          1
\end{verbatim}

\#\#I will now use the knn function to make my prediction.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Train.df2 }\OtherTok{\textless{}{-}}\NormalTok{ Train.df2 }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{relocate}\NormalTok{(Personal.Loan, }\AttributeTok{.after =}\NormalTok{ CreditCard)}
\NormalTok{Prediction }\OtherTok{\textless{}{-}}\FunctionTok{knn}\NormalTok{(}\AttributeTok{train=}\NormalTok{Train.df2[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{11}\NormalTok{], }
                 \AttributeTok{test=}\NormalTok{To\_Predict\_norm2[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{11}\NormalTok{],}
                 \AttributeTok{cl=}\NormalTok{Train.df2}\SpecialCharTok{$}\NormalTok{Personal.Loan,}
                 \AttributeTok{k=}\DecValTok{3}\NormalTok{)}
\FunctionTok{print}\NormalTok{(Prediction)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0
## Levels: 0 1
\end{verbatim}

\#\#Now I will create my confusion matrix \#\#First I will use the
predict function of the caret package.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{predictions2}\OtherTok{\textless{}{-}}\FunctionTok{predict}\NormalTok{(Knn.model,Validation.df2)}
\end{Highlighting}
\end{Shaded}

\#Now I will compute the confusion matrix using the caret package.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{confusionMatrix}\NormalTok{(predictions2,Validation.df2}\SpecialCharTok{$}\NormalTok{Personal.Loan)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    0    1
##          0 2253   29
##          1    7  211
##                                           
##                Accuracy : 0.9856          
##                  95% CI : (0.9801, 0.9899)
##     No Information Rate : 0.904           
##     P-Value [Acc > NIR] : < 2.2e-16       
##                                           
##                   Kappa : 0.9135          
##                                           
##  Mcnemar's Test P-Value : 0.0004653       
##                                           
##             Sensitivity : 0.9969          
##             Specificity : 0.8792          
##          Pos Pred Value : 0.9873          
##          Neg Pred Value : 0.9679          
##              Prevalence : 0.9040          
##          Detection Rate : 0.9012          
##    Detection Prevalence : 0.9128          
##       Balanced Accuracy : 0.9380          
##                                           
##        'Positive' Class : 0               
## 
\end{verbatim}

\#\#The prediction stands that the customer will not take out the
personal loan. Accuracy from the prior matrix to this one has increased.

\end{document}
